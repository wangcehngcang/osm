<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>课程</title>
    <style>
    * {
        margin: 0;
        padding: 0;
    }

    .box {
        width: 80%;
        height: auto;
        padding-top: 20px;
        margin: 0 auto;
    }
    .box a{
        text-decoration: none;
        font-size: 26px;
    }
    #con h6 {
        height: 60px;
        text-align: center;
        line-height: 60px;
        font-size: 30px;
        font-family: bold;
    }

    #btn {
        padding: 6px 15px;
        background: #ccc;
        border-style: none;
        float: right;
        margin-top: 15px;
        margin-right: 15px;
        outline: none;
        border-radius: 30px;
        color: #fff;
        font-size: 20px;
    }

    #con table {
        width: 100%;
    }

    #con table tr td {
        width: 15%;
        height: 35px;
        line-height: 35px;
        text-align: center;
    }
    #content table{
     width: 100%;
 }
 #content h6{
    height: 60px;
    text-align: center;
    line-height: 60px;
    font-size: 30px;
    font-family: bold;
}
#submit{
    width: 30px;
}
</style>
</head>

<body>
    <div class="box">
        <a href="index.html">←</a>
        <div id="content">
            <h6>新增班级信息</h6>
            <table border="" cellspacing="" cellpadding="">
                <tr>
                    <td>班&nbsp;&nbsp;&nbsp;级 <input type="text" id="classroom"></td>
                    <td>门牌号 <input type="text" id="door"></td>
                    <td>讲&nbsp;&nbsp;&nbsp;师 <input type="text" id="lecturer"></td>
                    <td>课&nbsp;&nbsp;&nbsp;程 <input type="text" id="curriculum"></td>
                    <td>人&nbsp;&nbsp;&nbsp;数 <input type="text" id="people"></td>
                    <td><button id="submit">提交</button></td>
                </tr>
            </table>
        </div>
        <div id="con">
            <h6>讲师信息</h6>
            <table border="2" cellspacing="0" id="exhibition">
                <tr>
                    <td>班级</td>
                    <td>门牌号</td>
                    <td>讲师</td>
                    <td>课程</td>
                    <td>人数</td>
                    <td>操作</td>
                </tr>
            </table>
        </div>
    </div>
    <script src="js/jquery.js"></script>
    <script>
        var href='http://localhost:8000';
        // 点击录入
        submit.onclick=function(){
            luru();
            duqu();
            window.location.reload();
            $('input').val('');
        }

        duqu();
        // 录入
        function luru(){
            if(/[\u4E00-\u9FA5]/g.test(classroom.value)){
                alert('班级号不能为中文')
            }else if(classroom.value==''){
                alert('班级号不能为空')
            }else if(door.value==''){
                alert('门牌号不能为空')
            }else if(lecturer.value==''){
                alert('讲师不能为空')
            }else if(curriculum.value==''){
                alert('课程不能为空')
            }else if(people.value==''){
                alert('人数不能为空')
            }else{
                $.ajax({
                    type:'post',
                    url:href+'/users/teacher',
                    data:{
                        classroom:classroom.value,
                        door:door.value,
                        lecturer:lecturer.value,
                        curriculum:curriculum.value,
                        people:people.value,
                    },
                    success(data){
                        console.log(data)
                        if(data=='ok'){
                            alert('录入成功');

                        }else{
                            alert('该班级已存在');
                        }
                    }
                })
            }
        }
        // 读取
        function duqu(){
            $.ajax({
                type:'get',
                url:href+'/users/r',
                success(data){
                    console.log(data)
                    for(var i=0;i<data.length;i++){
                        var otr=document.createElement('tr');
                        otr.innerHTML=`
                            <td>${data[i].class}</td>
                            <td>${data[i].door}</td>
                            <td>${data[i].lecturer}</td>
                            <td>${data[i].curriculum}</td>
                            <td>${data[i].number}</td>
                            <td><button>修改</button></td>  
                        `;
                       exhibition.appendChild(otr)
                    }
                }
            })
        }
    </script>
</body>
<!-- classroom班级 -->
<!-- door门牌号 -->
<!-- lecturer 讲师-->
<!-- curriculum 课程 -->
<!-- Number人数-->
</html>